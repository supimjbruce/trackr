{"ast":null,"code":"\"use strict\";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.useDomComponentNavigation=exports.emitDomLinkEvent=exports.emitDomDismissAll=exports.emitDomGoBack=exports.emitDomDismiss=exports.emitDomSetParams=void 0;var global_1=require(\"expo/dom/global\");var react_1=__importDefault(require(\"react\"));var ROUTER_LINK_TYPE='$$router_link';var ROUTER_DISMISS_ALL_TYPE='$$router_dismissAll';var ROUTER_DISMISS_TYPE='$$router_dismiss';var ROUTER_BACK_TYPE='$$router_goBack';var ROUTER_SET_PARAMS_TYPE='$$router_setParams';function emitDomEvent(type){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(typeof ReactNativeWebView!=='undefined'){window.ReactNativeWebView.postMessage(JSON.stringify({type:type,data:data}));return true;}return false;}function emitDomSetParams(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return emitDomEvent(ROUTER_SET_PARAMS_TYPE,{params:params});}exports.emitDomSetParams=emitDomSetParams;function emitDomDismiss(count){return emitDomEvent(ROUTER_DISMISS_TYPE,{count:count});}exports.emitDomDismiss=emitDomDismiss;function emitDomGoBack(){return emitDomEvent(ROUTER_BACK_TYPE);}exports.emitDomGoBack=emitDomGoBack;function emitDomDismissAll(){return emitDomEvent(ROUTER_DISMISS_ALL_TYPE);}exports.emitDomDismissAll=emitDomDismissAll;function emitDomLinkEvent(href,options){return emitDomEvent(ROUTER_LINK_TYPE,{href:href,options:options});}exports.emitDomLinkEvent=emitDomLinkEvent;function useDomComponentNavigation(store){react_1.default.useEffect(function(){if(process.env.EXPO_OS==='web'){return function(){};}return(0,global_1.addGlobalDomEventListener)(function(_ref){var type=_ref.type,data=_ref.data;switch(type){case ROUTER_LINK_TYPE:store.linkTo(data.href,data.options);break;case ROUTER_DISMISS_ALL_TYPE:store.dismissAll();break;case ROUTER_DISMISS_TYPE:store.dismiss(data.count);break;case ROUTER_BACK_TYPE:store.goBack();break;case ROUTER_SET_PARAMS_TYPE:store.setParams(data.params);break;}});},[store]);}exports.useDomComponentNavigation=useDomComponentNavigation;","map":{"version":3,"names":["global_1","require","react_1","__importDefault","ROUTER_LINK_TYPE","ROUTER_DISMISS_ALL_TYPE","ROUTER_DISMISS_TYPE","ROUTER_BACK_TYPE","ROUTER_SET_PARAMS_TYPE","emitDomEvent","type","data","arguments","length","undefined","ReactNativeWebView","window","postMessage","JSON","stringify","emitDomSetParams","params","exports","emitDomDismiss","count","emitDomGoBack","emitDomDismissAll","emitDomLinkEvent","href","options","useDomComponentNavigation","store","default","useEffect","process","env","EXPO_OS","addGlobalDomEventListener","_ref","linkTo","dismissAll","dismiss","goBack","setParams"],"sources":["/Users/jonathanbruce/Coding/trackr/node_modules/expo-router/src/link/useDomComponentNavigation.ts"],"sourcesContent":["import { addGlobalDomEventListener } from 'expo/dom/global';\nimport React from 'react';\n\nimport type { RouterStore } from '../global-state/router-store';\nimport type { LinkToOptions } from '../global-state/routing';\n\nconst ROUTER_LINK_TYPE = '$$router_link';\nconst ROUTER_DISMISS_ALL_TYPE = '$$router_dismissAll';\nconst ROUTER_DISMISS_TYPE = '$$router_dismiss';\nconst ROUTER_BACK_TYPE = '$$router_goBack';\nconst ROUTER_SET_PARAMS_TYPE = '$$router_setParams';\n\nfunction emitDomEvent(type: string, data: any = {}) {\n  // @ts-expect-error: ReactNativeWebView is a global variable injected by the WebView\n  if (typeof ReactNativeWebView !== 'undefined') {\n    (window as any).ReactNativeWebView.postMessage(JSON.stringify({ type, data }));\n    return true;\n  }\n  return false;\n}\n\nexport function emitDomSetParams(\n  params: Record<string, string | number | (string | number)[]> = {}\n) {\n  return emitDomEvent(ROUTER_SET_PARAMS_TYPE, { params });\n}\n\nexport function emitDomDismiss(count?: number) {\n  return emitDomEvent(ROUTER_DISMISS_TYPE, { count });\n}\n\nexport function emitDomGoBack() {\n  return emitDomEvent(ROUTER_BACK_TYPE);\n}\n\nexport function emitDomDismissAll() {\n  return emitDomEvent(ROUTER_DISMISS_ALL_TYPE);\n}\n\nexport function emitDomLinkEvent(href: string, options: LinkToOptions) {\n  return emitDomEvent(ROUTER_LINK_TYPE, { href, options });\n}\n\nexport function useDomComponentNavigation(store: RouterStore) {\n  React.useEffect(() => {\n    if (process.env.EXPO_OS === 'web') {\n      return () => {};\n    }\n    return addGlobalDomEventListener<any>(({ type, data }) => {\n      switch (type) {\n        case ROUTER_LINK_TYPE:\n          store.linkTo(data.href, data.options);\n          break;\n        case ROUTER_DISMISS_ALL_TYPE:\n          store.dismissAll();\n          break;\n        case ROUTER_DISMISS_TYPE:\n          store.dismiss(data.count);\n          break;\n        case ROUTER_BACK_TYPE:\n          store.goBack();\n          break;\n        case ROUTER_SET_PARAMS_TYPE:\n          store.setParams(data.params);\n          break;\n      }\n    });\n  }, [store]);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}