{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");var _reactJsxRuntime=require(\"react/jsx-runtime\");var _objectWithoutProperties=require(\"@babel/runtime/helpers/objectWithoutProperties\");var _excluded=[\"children\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.withLayoutContext=exports.useFilterScreenChildren=void 0;var react_1=__importDefault(require(\"react\"));var Route_1=require(\"../Route\");var useScreens_1=require(\"../useScreens\");var Screen_1=require(\"../views/Screen\");function useFilterScreenChildren(children){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},isCustomNavigator=_ref.isCustomNavigator,contextKey=_ref.contextKey;return react_1.default.useMemo(function(){var customChildren=[];var screens=react_1.default.Children.map(children,function(child){if(react_1.default.isValidElement(child)&&child&&child.type===Screen_1.Screen){if(!child.props.name){throw new Error(`<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must have a \\`name\\` prop when used as a child of a Layout Route.`);}if(\"production\"!=='production'){if(['children','component','getComponent'].some(function(key){return key in child.props;})){throw new Error(`<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must not have a \\`children\\`, \\`component\\`, or \\`getComponent\\` prop when used as a child of a Layout Route`);}}return child.props;}else{if(isCustomNavigator){customChildren.push(child);}else{console.warn(`Layout children must be of type Screen, all other children are ignored. To use custom children, create a custom <Layout />. Update Layout Route at: \"app${contextKey}/_layout\"`);}}});if(\"production\"!=='production'){var names=screens==null?void 0:screens.map(function(screen){return screen.name;});if(names&&new Set(names).size!==names.length){throw new Error('Screen names must be unique: '+names);}}return{screens:screens,children:customChildren};},[children]);}exports.useFilterScreenChildren=useFilterScreenChildren;function withLayoutContext(Nav,processor){var Navigator=react_1.default.forwardRef(function(_ref2,ref){var userDefinedChildren=_ref2.children,props=_objectWithoutProperties(_ref2,_excluded);var contextKey=(0,Route_1.useContextKey)();var _useFilterScreenChild=useFilterScreenChildren(userDefinedChildren,{contextKey:contextKey}),screens=_useFilterScreenChild.screens;var processed=processor?processor(screens!=null?screens:[]):screens;var sorted=(0,useScreens_1.useSortedScreens)(processed!=null?processed:[]);if(!sorted.length){return null;}return(_reactJsxRuntime.jsx(Nav,_objectSpread(_objectSpread({},props),{},{id:contextKey,ref:ref,children:sorted})));});Navigator.Screen=Screen_1.Screen;return Navigator;}exports.withLayoutContext=withLayoutContext;","map":{"version":3,"names":["react_1","__importDefault","require","Route_1","useScreens_1","Screen_1","useFilterScreenChildren","children","_ref","arguments","length","undefined","isCustomNavigator","contextKey","default","useMemo","customChildren","screens","Children","map","child","isValidElement","type","Screen","props","name","Error","some","key","push","console","warn","names","screen","Set","size","exports","withLayoutContext","Nav","processor","Navigator","forwardRef","_ref2","ref","userDefinedChildren","_objectWithoutProperties","_excluded","useContextKey","_useFilterScreenChild","processed","sorted","useSortedScreens","_reactJsxRuntime","jsx","_objectSpread","id"],"sources":["/Users/jonathanbruce/Coding/trackr/node_modules/expo-router/src/layouts/withLayoutContext.tsx"],"sourcesContent":["import { EventMapBase, NavigationState } from '@react-navigation/native';\nimport React from 'react';\n\nimport { useContextKey } from '../Route';\nimport { PickPartial } from '../types';\nimport { useSortedScreens, ScreenProps } from '../useScreens';\nimport { Screen } from '../views/Screen';\n\nexport function useFilterScreenChildren(\n  children: React.ReactNode,\n  {\n    isCustomNavigator,\n    contextKey,\n  }: {\n    isCustomNavigator?: boolean;\n    /** Used for sending developer hints */\n    contextKey?: string;\n  } = {}\n) {\n  return React.useMemo(() => {\n    const customChildren: any[] = [];\n    const screens = React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && child && child.type === Screen) {\n        if (!child.props.name) {\n          throw new Error(\n            `<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must have a \\`name\\` prop when used as a child of a Layout Route.`\n          );\n        }\n        if (process.env.NODE_ENV !== 'production') {\n          if (['children', 'component', 'getComponent'].some((key) => key in child.props)) {\n            throw new Error(\n              `<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must not have a \\`children\\`, \\`component\\`, or \\`getComponent\\` prop when used as a child of a Layout Route`\n            );\n          }\n        }\n        return child.props;\n      } else {\n        if (isCustomNavigator) {\n          customChildren.push(child);\n        } else {\n          console.warn(\n            `Layout children must be of type Screen, all other children are ignored. To use custom children, create a custom <Layout />. Update Layout Route at: \"app${contextKey}/_layout\"`\n          );\n        }\n      }\n    });\n\n    // Add an assertion for development\n    if (process.env.NODE_ENV !== 'production') {\n      // Assert if names are not unique\n      const names = screens?.map((screen) => screen.name);\n      if (names && new Set(names).size !== names.length) {\n        throw new Error('Screen names must be unique: ' + names);\n      }\n    }\n\n    return {\n      screens,\n      children: customChildren,\n    };\n  }, [children]);\n}\n\n/** Return a navigator that automatically injects matched routes and renders nothing when there are no children. Return type with children prop optional */\nexport function withLayoutContext<\n  TOptions extends object,\n  T extends React.ComponentType<any>,\n  State extends NavigationState,\n  EventMap extends EventMapBase,\n>(\n  Nav: T,\n  processor?: (\n    options: ScreenProps<TOptions, State, EventMap>[]\n  ) => ScreenProps<TOptions, State, EventMap>[]\n): React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<PickPartial<React.ComponentProps<T>, 'children'>> &\n    React.RefAttributes<unknown>\n> & {\n  Screen: (props: ScreenProps<TOptions, State, EventMap>) => null;\n} {\n  const Navigator = React.forwardRef(\n    (\n      { children: userDefinedChildren, ...props }: PickPartial<React.ComponentProps<T>, 'children'>,\n      ref\n    ) => {\n      const contextKey = useContextKey();\n\n      const { screens } = useFilterScreenChildren(userDefinedChildren, {\n        contextKey,\n      });\n\n      const processed = processor ? processor(screens ?? []) : screens;\n\n      const sorted = useSortedScreens(processed ?? []);\n\n      // Prevent throwing an error when there are no screens.\n      if (!sorted.length) {\n        return null;\n      }\n\n      return (\n        // @ts-expect-error\n        <Nav {...props} id={contextKey} ref={ref} children={sorted} />\n      );\n    }\n  );\n\n  // @ts-expect-error\n  Navigator.Screen = Screen;\n  // @ts-expect-error\n  return Navigator;\n}\n"],"mappings":"2kCACA,IAAAA,OAAA,CAAAC,eAAA,CAAAC,OAAA,WAEA,IAAAC,OAAA,CAAAD,OAAA,aAEA,IAAAE,YAAA,CAAAF,OAAA,kBACA,IAAAG,QAAA,CAAAH,OAAA,oBAEA,QAAgB,CAAAI,uBAAuBA,CACrCC,QAAyB,CAQnB,KAAAC,IAAA,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAF,EAAE,CANJG,iBAAiB,CAAAJ,IAAA,CAAjBI,iBAAiB,CACjBC,UAAU,CAAAL,IAAA,CAAVK,UAAU,CAOZ,MAAO,CAAAb,OAAA,CAAAc,OAAK,CAACC,OAAO,CAAC,UAAK,CACxB,GAAM,CAAAC,cAAc,CAAU,EAAE,CAChC,GAAM,CAAAC,OAAO,CAAGjB,OAAA,CAAAc,OAAK,CAACI,QAAQ,CAACC,GAAG,CAACZ,QAAQ,CAAE,SAACa,KAAK,CAAI,CACrD,GAAIpB,OAAA,CAAAc,OAAK,CAACO,cAAc,CAACD,KAAK,CAAC,EAAIA,KAAK,EAAIA,KAAK,CAACE,IAAI,GAAKjB,QAAA,CAAAkB,MAAM,CAAE,CACjE,GAAI,CAACH,KAAK,CAACI,KAAK,CAACC,IAAI,CAAE,CACrB,KAAM,IAAI,CAAAC,KAAK,CACb,sDAAsDb,UAAU,8EAA8E,CAC/I,C,CAEH,GAAI,eAAyB,YAAY,CAAE,CACzC,GAAI,CAAC,UAAU,CAAE,WAAW,CAAE,cAAc,CAAC,CAACc,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,GAAI,CAAAR,KAAK,CAACI,KAAK,GAAC,CAAE,CAC/E,KAAM,IAAI,CAAAE,KAAK,CACb,sDAAsDb,UAAU,yHAAyH,CAC1L,C,EAGL,MAAO,CAAAO,KAAK,CAACI,KAAK,C,CACnB,IAAM,CACL,GAAIZ,iBAAiB,CAAE,CACrBI,cAAc,CAACa,IAAI,CAACT,KAAK,CAAC,C,CAC3B,IAAM,CACLU,OAAO,CAACC,IAAI,CACV,2JAA2JlB,UAAU,WAAW,CACjL,C,EAGP,CAAC,CAAC,CAGF,GAAI,eAAyB,YAAY,CAAE,CAEzC,GAAM,CAAAmB,KAAK,CAAGf,OAAO,cAAPA,OAAO,CAAEE,GAAG,CAAC,SAACc,MAAM,QAAK,CAAAA,MAAM,CAACR,IAAI,GAAC,CACnD,GAAIO,KAAK,EAAI,GAAI,CAAAE,GAAG,CAACF,KAAK,CAAC,CAACG,IAAI,GAAKH,KAAK,CAACtB,MAAM,CAAE,CACjD,KAAM,IAAI,CAAAgB,KAAK,CAAC,+BAA+B,CAAGM,KAAK,CAAC,C,EAI5D,MAAO,CACLf,OAAO,CAAPA,OAAO,CACPV,QAAQ,CAAES,c,CACX,CACH,CAAC,CAAE,CAACT,QAAQ,CAAC,CAAC,CAChB,CArDA6B,OAAA,CAAA9B,uBAAA,CAAAA,uBAAA,CAwDA,QAAgB,CAAA+B,iBAAiBA,CAM/BC,GAAM,CACNC,SAE6C,EAO7C,GAAM,CAAAC,SAAS,CAAGxC,OAAA,CAAAc,OAAK,CAAC2B,UAAU,CAChC,SAAAC,KAAA,CAEEC,GAAG,CACD,IAFU,CAAAC,mBAAmB,CAAAF,KAAA,CAA7BnC,QAAQ,CAA0BiB,KAAK,CAAAqB,wBAAA,CAAAH,KAAA,CAAAI,SAAA,EAGzC,GAAM,CAAAjC,UAAU,CAAG,GAAAV,OAAA,CAAA4C,aAAa,GAAE,CAElC,IAAAC,qBAAA,CAAoB1C,uBAAuB,CAACsC,mBAAmB,CAAE,CAC/D/B,UAAU,CAAVA,U,CACD,CAAC,CAFMI,OAAO,CAAA+B,qBAAA,CAAP/B,OAAO,CAIf,GAAM,CAAAgC,SAAS,CAAGV,SAAS,CAAGA,SAAS,CAACtB,OAAO,OAAPA,OAAO,CAAI,EAAE,CAAC,CAAGA,OAAO,CAEhE,GAAM,CAAAiC,MAAM,CAAG,GAAA9C,YAAA,CAAA+C,gBAAgB,EAACF,SAAS,OAATA,SAAS,CAAI,EAAE,CAAC,CAGhD,GAAI,CAACC,MAAM,CAACxC,MAAM,CAAE,CAClB,MAAO,KAAI,C,CAGb,OAEE0C,gBAAA,CAAAC,GAAA,CAACf,GAAG,CAAAgB,aAAA,CAAAA,aAAA,IAAK9B,KAAK,MAAE+B,EAAE,CAAE1C,UAAW,CAAC8B,GAAG,CAAEA,GAAI,CAACpC,QAAQ,CAAE2C,MAAO,GAAG,EAElE,CAAC,CACF,CAGDV,SAAS,CAACjB,MAAM,CAAGlB,QAAA,CAAAkB,MAAM,CAEzB,MAAO,CAAAiB,SAAS,CAClB,CA/CAJ,OAAA,CAAAC,iBAAA,CAAAA,iBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}