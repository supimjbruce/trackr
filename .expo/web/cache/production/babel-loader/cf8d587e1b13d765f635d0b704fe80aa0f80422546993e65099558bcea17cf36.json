{"ast":null,"code":"\"use strict\";var _asyncToGenerator=require(\"@babel/runtime/helpers/asyncToGenerator\");var _globalThis$expo,_globalThis$expo$modu;var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||(\"get\"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function get(){return m[k];}};}Object.defineProperty(o,k2,desc);}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.getPathFromState=exports.getStateFromPath=exports.addEventListener=exports.getRootURL=exports.getInitialURL=void 0;var Linking=__importStar(require(\"expo-linking\"));var react_native_1=require(\"react-native-web/dist/index\");var extractPathFromURL_1=require(\"../fork/extractPathFromURL\");var getPathFromState_1=__importDefault(require(\"../fork/getPathFromState\"));exports.getPathFromState=getPathFromState_1.default;var getStateFromPath_1=__importDefault(require(\"../fork/getStateFromPath\"));exports.getStateFromPath=getStateFromPath_1.default;var isExpoGo=typeof expo!=='undefined'&&((_globalThis$expo=globalThis.expo)==null?void 0:(_globalThis$expo$modu=_globalThis$expo.modules)==null?void 0:_globalThis$expo$modu.ExpoGo);function getInitialURL(){if(\"production\"==='test'){var _Linking$getInitialUR;return(_Linking$getInitialUR=Linking.getInitialURL())!=null?_Linking$getInitialUR:getRootURL();}if(react_native_1.Platform.OS==='web'){var _window$location;if(typeof window==='undefined'){return'';}else if(typeof((_window$location=window.location)==null?void 0:_window$location.href)==='string'){return window.location.href;}}return Promise.race([_asyncToGenerator(function*(){var url=yield Linking.getInitialURL();if(url&&isExpoGo){var parsed=Linking.parse(url);if(parsed.path===null||['','/'].includes((0,extractPathFromURL_1.adjustPathname)({hostname:parsed.hostname,pathname:parsed.path}))){return getRootURL();}}return url!=null?url:getRootURL();})(),new Promise(function(resolve){return(setTimeout(function(){return resolve(getRootURL());},150));})]);}exports.getInitialURL=getInitialURL;var _rootURL;function getRootURL(){if(_rootURL===undefined){_rootURL=Linking.createURL('/');}return _rootURL;}exports.getRootURL=getRootURL;function addEventListener(listener){var callback=undefined;if(isExpoGo){callback=function callback(_ref2){var url=_ref2.url;var parsed=Linking.parse(url);if(parsed.path===null||['','/'].includes((0,extractPathFromURL_1.adjustPathname)({hostname:parsed.hostname,pathname:parsed.path}))){listener(getRootURL());}else{listener(url);}};}else{callback=function callback(_ref3){var url=_ref3.url;return listener(url);};}var subscription=Linking.addEventListener('url',callback);return function(){subscription==null?void 0:subscription.remove==null?void 0:subscription.remove();};}exports.addEventListener=addEventListener;","map":{"version":3,"names":["Linking","__importStar","require","react_native_1","extractPathFromURL_1","getPathFromState_1","__importDefault","exports","getPathFromState","default","getStateFromPath_1","getStateFromPath","isExpoGo","expo","_globalThis$expo","globalThis","_globalThis$expo$modu","modules","ExpoGo","getInitialURL","_Linking$getInitialUR","getRootURL","Platform","OS","_window$location","window","location","href","Promise","race","_asyncToGenerator","url","parsed","parse","path","includes","adjustPathname","hostname","pathname","resolve","setTimeout","_rootURL","undefined","createURL","addEventListener","listener","callback","_ref2","_ref3","subscription","remove"],"sources":["/Users/jonathanbruce/Coding/trackr/node_modules/expo-router/src/link/linking.ts"],"sourcesContent":["import * as Linking from 'expo-linking';\nimport { Platform } from 'react-native';\n\nimport { adjustPathname } from '../fork/extractPathFromURL';\nimport getPathFromState from '../fork/getPathFromState';\nimport getStateFromPath from '../fork/getStateFromPath';\n\nconst isExpoGo = typeof expo !== 'undefined' && globalThis.expo?.modules?.ExpoGo;\n\n// A custom getInitialURL is used on native to ensure the app always starts at\n// the root path if it's launched from something other than a deep link.\n// This helps keep the native functionality working like the web functionality.\n// For example, if you had a root navigator where the first screen was `/settings` and the second was `/index`\n// then `/index` would be used on web and `/settings` would be used on native.\nexport function getInitialURL(): Promise<string | null> | string {\n  if (process.env.NODE_ENV === 'test') {\n    return Linking.getInitialURL() ?? getRootURL();\n  }\n\n  if (Platform.OS === 'web') {\n    if (typeof window === 'undefined') {\n      return '';\n    } else if (typeof window.location?.href === 'string') {\n      return window.location.href;\n    }\n  }\n  return Promise.race<string>([\n    (async () => {\n      const url = await Linking.getInitialURL();\n\n      // NOTE(EvanBacon): This could probably be wrapped with the development boundary\n      // since Expo Go is mostly just used in development.\n\n      // Expo Go is weird and requires the root path to be `/--/`\n      if (url && isExpoGo) {\n        const parsed = Linking.parse(url);\n        // If the URL is defined (default in Expo Go dev apps) and the URL has no path:\n        // `exp://192.168.87.39:19000/` then use the default `exp://192.168.87.39:19000/--/`\n        if (\n          parsed.path === null ||\n          ['', '/'].includes(\n            adjustPathname({\n              hostname: parsed.hostname,\n              pathname: parsed.path,\n            })\n          )\n        ) {\n          return getRootURL();\n        }\n      }\n      // The path will be nullish in bare apps when the app is launched from the home screen.\n      // TODO(EvanBacon): define some policy around notifications.\n      return url ?? getRootURL();\n    })(),\n    new Promise<string>((resolve) =>\n      // Timeout in 150ms if `getInitialState` doesn't resolve\n      // Workaround for https://github.com/facebook/react-native/issues/25675\n      setTimeout(() => resolve(getRootURL()), 150)\n    ),\n  ]);\n}\n\nlet _rootURL: string | undefined;\n\nexport function getRootURL(): string {\n  if (_rootURL === undefined) {\n    _rootURL = Linking.createURL('/');\n  }\n  return _rootURL;\n}\n\nexport function addEventListener(listener: (url: string) => void) {\n  let callback: (({ url }: { url: string }) => void) | undefined = undefined;\n\n  if (isExpoGo) {\n    // This extra work is only done in the Expo Go app.\n    callback = ({ url }: { url: string }) => {\n      const parsed = Linking.parse(url);\n\n      // If the URL is defined (default in Expo Go dev apps) and the URL has no path:\n      // `exp://192.168.87.39:19000/` then use the default `exp://192.168.87.39:19000/--/`\n      if (\n        parsed.path === null ||\n        ['', '/'].includes(adjustPathname({ hostname: parsed.hostname, pathname: parsed.path }))\n      ) {\n        listener(getRootURL());\n      } else {\n        listener(url);\n      }\n    };\n  } else {\n    callback = ({ url }: { url: string }) => listener(url);\n  }\n  const subscription = Linking.addEventListener('url', callback);\n\n  return () => {\n    // https://github.com/facebook/react-native/commit/6d1aca806cee86ad76de771ed3a1cc62982ebcd7\n    subscription?.remove?.();\n  };\n}\n\nexport { getStateFromPath, getPathFromState };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}