{"ast":null,"code":"\"use strict\";var _slicedToArray=require(\"@babel/runtime/helpers/slicedToArray\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useOptionalNavigation=exports.useLoadedNavigation=void 0;var native_1=require(\"@react-navigation/native\");var react_1=require(\"react\");var router_store_1=require(\"../global-state/router-store\");function useLoadedNavigation(){var _ref=(0,router_store_1.useExpoRouter)(),navigationRef=_ref.navigationRef;var navigation=(0,native_1.useNavigation)();var isMounted=(0,react_1.useRef)(true);var pending=(0,react_1.useRef)([]);(0,react_1.useEffect)(function(){isMounted.current=true;return function(){isMounted.current=false;};},[]);var flush=(0,react_1.useCallback)(function(){if(isMounted.current){var pendingCallbacks=pending.current;pending.current=[];pendingCallbacks.forEach(function(callback){callback(navigation);});}},[navigation]);(0,react_1.useEffect)(function(){if(navigationRef.current){flush();}},[flush]);var push=(0,react_1.useCallback)(function(fn){pending.current.push(fn);if(navigationRef.current){flush();}},[flush]);return push;}exports.useLoadedNavigation=useLoadedNavigation;function useOptionalNavigation(){var _ref2=(0,react_1.useState)(null),_ref3=_slicedToArray(_ref2,2),navigation=_ref3[0],setNavigation=_ref3[1];var loadNavigation=useLoadedNavigation();(0,react_1.useEffect)(function(){loadNavigation(function(nav){return setNavigation(nav);});},[]);return navigation;}exports.useOptionalNavigation=useOptionalNavigation;","map":{"version":3,"names":["native_1","require","react_1","router_store_1","useLoadedNavigation","_ref","useExpoRouter","navigationRef","navigation","useNavigation","isMounted","useRef","pending","useEffect","current","flush","useCallback","pendingCallbacks","forEach","callback","push","fn","exports","useOptionalNavigation","_ref2","useState","_ref3","_slicedToArray","setNavigation","loadNavigation","nav"],"sources":["/Users/jonathanbruce/Coding/trackr/node_modules/expo-router/src/link/useLoadedNavigation.ts"],"sourcesContent":["import { NavigationProp, useNavigation } from '@react-navigation/native';\nimport { useCallback, useState, useEffect, useRef } from 'react';\n\nimport { useExpoRouter } from '../global-state/router-store';\n\ntype GenericNavigation = NavigationProp<ReactNavigation.RootParamList>;\n\n/** Returns a callback which is invoked when the navigation state has loaded. */\nexport function useLoadedNavigation() {\n  const { navigationRef } = useExpoRouter();\n  const navigation = useNavigation();\n  const isMounted = useRef(true);\n  const pending = useRef<((navigation: GenericNavigation) => void)[]>([]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const flush = useCallback(() => {\n    if (isMounted.current) {\n      const pendingCallbacks = pending.current;\n      pending.current = [];\n      pendingCallbacks.forEach((callback) => {\n        // @ts-ignore\n        callback(navigation);\n      });\n    }\n  }, [navigation]);\n\n  useEffect(() => {\n    if (navigationRef.current) {\n      flush();\n    }\n  }, [flush]);\n\n  const push = useCallback(\n    (fn: (navigation: GenericNavigation) => void) => {\n      pending.current.push(fn);\n      if (navigationRef.current) {\n        flush();\n      }\n    },\n    [flush]\n  );\n\n  return push;\n}\n\nexport function useOptionalNavigation(): GenericNavigation | null {\n  const [navigation, setNavigation] = useState<GenericNavigation | null>(null);\n  const loadNavigation = useLoadedNavigation();\n\n  useEffect(() => {\n    loadNavigation((nav) => setNavigation(nav));\n  }, []);\n\n  return navigation;\n}\n"],"mappings":"0MAAA,IAAAA,QAAA,CAAAC,OAAA,6BACA,IAAAC,OAAA,CAAAD,OAAA,UAEA,IAAAE,cAAA,CAAAF,OAAA,iCAKA,QAAgB,CAAAG,mBAAmBA,CAAA,EACjC,IAAAC,IAAA,CAA0B,GAAAF,cAAA,CAAAG,aAAa,GAAE,CAAjCC,aAAa,CAAAF,IAAA,CAAbE,aAAa,CACrB,GAAM,CAAAC,UAAU,CAAG,GAAAR,QAAA,CAAAS,aAAa,GAAE,CAClC,GAAM,CAAAC,SAAS,CAAG,GAAAR,OAAA,CAAAS,MAAM,EAAC,IAAI,CAAC,CAC9B,GAAM,CAAAC,OAAO,CAAG,GAAAV,OAAA,CAAAS,MAAM,EAA8C,EAAE,CAAC,CAEvE,GAAAT,OAAA,CAAAW,SAAS,EAAC,UAAK,CACbH,SAAS,CAACI,OAAO,CAAG,IAAI,CACxB,MAAO,WAAK,CACVJ,SAAS,CAACI,OAAO,CAAG,KAAK,CAC3B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAC,KAAK,CAAG,GAAAb,OAAA,CAAAc,WAAW,EAAC,UAAK,CAC7B,GAAIN,SAAS,CAACI,OAAO,CAAE,CACrB,GAAM,CAAAG,gBAAgB,CAAGL,OAAO,CAACE,OAAO,CACxCF,OAAO,CAACE,OAAO,CAAG,EAAE,CACpBG,gBAAgB,CAACC,OAAO,CAAC,SAACC,QAAQ,CAAI,CAEpCA,QAAQ,CAACX,UAAU,CAAC,CACtB,CAAC,CAAC,C,CAEN,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CAEhB,GAAAN,OAAA,CAAAW,SAAS,EAAC,UAAK,CACb,GAAIN,aAAa,CAACO,OAAO,CAAE,CACzBC,KAAK,EAAE,C,CAEX,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX,GAAM,CAAAK,IAAI,CAAG,GAAAlB,OAAA,CAAAc,WAAW,EACtB,SAACK,EAA2C,CAAI,CAC9CT,OAAO,CAACE,OAAO,CAACM,IAAI,CAACC,EAAE,CAAC,CACxB,GAAId,aAAa,CAACO,OAAO,CAAE,CACzBC,KAAK,EAAE,C,CAEX,CAAC,CACD,CAACA,KAAK,CAAC,CACR,CAED,MAAO,CAAAK,IAAI,CACb,CAzCAE,OAAA,CAAAlB,mBAAA,CAAAA,mBAAA,CA2CA,QAAgB,CAAAmB,qBAAqBA,CAAA,EACnC,IAAAC,KAAA,CAAoC,GAAAtB,OAAA,CAAAuB,QAAQ,EAA2B,IAAI,CAAC,CAAAC,KAAA,CAAAC,cAAA,CAAAH,KAAA,IAArEhB,UAAU,CAAAkB,KAAA,IAAEE,aAAa,CAAAF,KAAA,IAChC,GAAM,CAAAG,cAAc,CAAGzB,mBAAmB,EAAE,CAE5C,GAAAF,OAAA,CAAAW,SAAS,EAAC,UAAK,CACbgB,cAAc,CAAC,SAACC,GAAG,QAAK,CAAAF,aAAa,CAACE,GAAG,CAAC,GAAC,CAC7C,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAtB,UAAU,CACnB,CATAc,OAAA,CAAAC,qBAAA,CAAAA,qBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}